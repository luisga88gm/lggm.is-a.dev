---
import MainLayout from '../layouts/MainLayout.astro';
---

<MainLayout title="Contact - LGGM">
	<!-- Contact Hero -->
	<section id="contact-hero" class="relative w-full h-screen sm:h-[70vh] overflow-hidden">
		<!-- Background Image - Full Section -->
		<div class="absolute inset-0 w-full h-full z-0">
			<img 
				src="/images/contact_hero.png" 
				alt="Contact background" 
				class="w-full h-full min-h-full object-cover sm:object-center"
				style="object-position: 70% center;"
			/>
			<!-- Dark Gradient Overlay -->
			<div class="absolute inset-0 bg-gradient-to-b from-[#0b0b0f]/85 via-[#0b0b0f]/70 to-[#0b0b0f]/95"></div>
		</div>

		<!-- Content - Over Image -->
		<div class="absolute inset-0 z-20 flex items-center pt-20 sm:pt-24">
			<div class="w-full px-4 sm:px-6 lg:px-12">
				<div class="w-full max-w-7xl mx-auto">
					<h1 class="text-5xl sm:text-6xl md:text-7xl lg:text-8xl uppercase mb-4 sm:mb-6 text-white" style="font-family: 'League Gothic', Impact, sans-serif; letter-spacing: 0.02em; line-height: 0.85;" data-i18n="contact.title">
						LET'S CONNECT
					</h1>
					
					<p class="text-2xl sm:text-3xl md:text-4xl" style="font-family: 'Satisfy', cursive; color: #ff007f;" data-i18n="contact.subtitle">
						Let's talk about your vision
					</p>
				</div>
			</div>
		</div>
	</section>

	<!-- Contact Form Section -->
	<section class="relative -mt-[400px] sm:mt-0 py-16 sm:py-20 lg:py-28 bg-transparent sm:bg-[#0b0b0f] flex justify-center z-50">
		<div style="max-width: 600px; width: 100%;" class="px-4">
			<!-- Form Container -->
			<div id="form-container" class="bg-[#13131a]/70 backdrop-blur-sm p-8 sm:p-10 lg:p-12 rounded-2xl border-2 border-[#00f2ff] shadow-[0_0_40px_rgba(0,242,255,0.3)] transition-all duration-300">
				<form id="contact-form" action="https://formspree.io/f/xzdrydyg" method="POST" class="space-y-6">
					<!-- Name Field -->
					<div class="form-group">
						<label for="name" class="block text-gray-300 text-sm font-medium mb-2" style="font-family: 'League Gothic', Impact, sans-serif; letter-spacing: 0.05em; font-size: 1.1rem;" data-i18n="contact.form.name">
							NAME
						</label>
						<input 
							type="text" 
							id="name" 
							name="name" 
							required
							class="w-full px-4 py-3 bg-[#0b0b0f]/50 border-2 border-gray-600 rounded-lg text-white placeholder-gray-500 focus:outline-none focus:border-[#00f2ff] focus:shadow-[0_0_15px_rgba(0,242,255,0.4)] transition-all duration-300"
							data-i18n-placeholder="contact.form.namePlaceholder"
							placeholder="Insert your name"
						/>
					</div>

					<!-- Email Field -->
					<div class="form-group">
						<label for="email" class="block text-gray-300 text-sm font-medium mb-2" style="font-family: 'League Gothic', Impact, sans-serif; letter-spacing: 0.05em; font-size: 1.1rem;" data-i18n="contact.form.email">
							EMAIL
						</label>
						<input 
							type="email" 
							id="email" 
							name="email" 
							required
							class="w-full px-4 py-3 bg-[#0b0b0f]/50 border-2 border-gray-600 rounded-lg text-white placeholder-gray-500 focus:outline-none focus:border-[#00f2ff] focus:shadow-[0_0_15px_rgba(0,242,255,0.4)] transition-all duration-300"
							data-i18n-placeholder="contact.form.emailPlaceholder"
							placeholder="Insert your email address"
						/>
					</div>

					<!-- Subject Field -->
					<div class="form-group">
						<label for="subject" class="block text-gray-300 text-sm font-medium mb-2" style="font-family: 'League Gothic', Impact, sans-serif; letter-spacing: 0.05em; font-size: 1.1rem;" data-i18n="contact.form.subject">
							SUBJECT
						</label>
						<input 
							type="text" 
							id="subject" 
							name="subject" 
							required
							class="w-full px-4 py-3 bg-[#0b0b0f]/50 border-2 border-gray-600 rounded-lg text-white placeholder-gray-500 focus:outline-none focus:border-[#00f2ff] focus:shadow-[0_0_15px_rgba(0,242,255,0.4)] transition-all duration-300"
							data-i18n-placeholder="contact.form.subjectPlaceholder"
							placeholder="Insert the subject of the contact"
						/>
					</div>

					<!-- Message Field -->
					<div class="form-group">
						<label for="message" class="block text-gray-300 text-sm font-medium mb-2" style="font-family: 'League Gothic', Impact, sans-serif; letter-spacing: 0.05em; font-size: 1.1rem;" data-i18n="contact.form.message">
							MESSAGE
						</label>
						<textarea 
							id="message" 
							name="message" 
							rows="6" 
							required
							class="w-full px-4 py-3 bg-[#0b0b0f]/50 border-2 border-gray-600 rounded-lg text-white placeholder-gray-500 focus:outline-none focus:border-[#00f2ff] focus:shadow-[0_0_15px_rgba(0,242,255,0.4)] transition-all duration-300 resize-none"
							data-i18n-placeholder="contact.form.messagePlaceholder"
							placeholder="Tell me about your project..."
						></textarea>
					</div>

					<!-- Honeypot Field (Formspree anti-spam) -->
					<div style="display:none">
						<input type="text" name="_gotcha" tabindex="-1" autocomplete="off" />
					</div>

					<!-- Dynamic Subject Field -->
					<input type="hidden" id="email-subject" name="_subject" value="New message from portfolio" />

					<!-- Submit Button -->
					<div class="pt-4">
						<button 
							type="submit" 
							id="submit-btn"
							class="w-full px-10 py-3 text-black text-2xl uppercase transition-all duration-300 hover:shadow-[0_0_25px_rgba(0,242,255,0.6)] hover:scale-105 disabled:opacity-70 disabled:cursor-not-allowed disabled:shadow-[0_0_10px_rgba(156,163,175,0.3)] disabled:scale-100" 
							style="background-color: #00c7d4; font-family: 'League Gothic', Impact, sans-serif; letter-spacing: 0.1em; border-radius: 9999px;"
							data-i18n="contact.form.submit"
						>
							SEND MESSAGE
						</button>
					</div>

					<!-- Status Message -->
					<div id="form-status" class="text-center text-sm font-medium opacity-0 transition-opacity duration-300">
						<span id="status-text"></span>
					</div>
				</form>
			</div>
		</div>
	</section>

	<!-- Social Media Section -->
	<section class="relative py-12 sm:py-16 px-4 bg-[#0b0b0f] border-t border-white/5">
		<div class="container mx-auto max-w-3xl text-center">
			<h3 class="text-3xl sm:text-4xl uppercase mb-8 text-gray-300" style="font-family: 'League Gothic', Impact, sans-serif;" data-i18n="contact.social.title">
				FIND ME ON
			</h3>
			
			<div class="flex justify-center items-center gap-6 sm:gap-8">
				<!-- GitHub -->
				<a href="https://github.com/luisga88gm" target="_blank" rel="noopener noreferrer" class="social-icon group">
					<svg class="w-10 h-10 sm:w-12 sm:h-12 text-gray-400 group-hover:text-[#ff007f] transition-all duration-300" style="filter: drop-shadow(0 0 0 transparent); transition: filter 0.3s ease;" onmouseenter="this.style.filter='drop-shadow(0 0 10px rgba(255, 0, 127, 0.8))'" onmouseleave="this.style.filter='drop-shadow(0 0 0 transparent)'" fill="currentColor" viewBox="0 0 24 24">
						<path d="M12 0c-6.626 0-12 5.373-12 12 0 5.302 3.438 9.8 8.207 11.387.599.111.793-.261.793-.577v-2.234c-3.338.726-4.033-1.416-4.033-1.416-.546-1.387-1.333-1.756-1.333-1.756-1.089-.745.083-.729.083-.729 1.205.084 1.839 1.237 1.839 1.237 1.07 1.834 2.807 1.304 3.492.997.107-.775.418-1.305.762-1.604-2.665-.305-5.467-1.334-5.467-5.931 0-1.311.469-2.381 1.236-3.221-.124-.303-.535-1.524.117-3.176 0 0 1.008-.322 3.301 1.23.957-.266 1.983-.399 3.003-.404 1.02.005 2.047.138 3.006.404 2.291-1.552 3.297-1.23 3.297-1.23.653 1.653.242 2.874.118 3.176.77.84 1.235 1.911 1.235 3.221 0 4.609-2.807 5.624-5.479 5.921.43.372.823 1.102.823 2.222v3.293c0 .319.192.694.801.576 4.765-1.589 8.199-6.086 8.199-11.386 0-6.627-5.373-12-12-12z"/>
					</svg>
				</a>

				<!-- LinkedIn -->
				<a href="https://linkedin.com/in/luisga88gm" target="_blank" rel="noopener noreferrer" class="social-icon group">
					<svg class="w-10 h-10 sm:w-12 sm:h-12 text-gray-400 group-hover:text-[#00f2ff] transition-all duration-300" style="filter: drop-shadow(0 0 0 transparent); transition: filter 0.3s ease;" onmouseenter="this.style.filter='drop-shadow(0 0 10px rgba(0, 242, 255, 0.8))'" onmouseleave="this.style.filter='drop-shadow(0 0 0 transparent)'" fill="currentColor" viewBox="0 0 24 24">
						<path d="M20.447 20.452h-3.554v-5.569c0-1.328-.027-3.037-1.852-3.037-1.853 0-2.136 1.445-2.136 2.939v5.667H9.351V9h3.414v1.561h.046c.477-.9 1.637-1.85 3.37-1.85 3.601 0 4.267 2.37 4.267 5.455v6.286zM5.337 7.433c-1.144 0-2.063-.926-2.063-2.065 0-1.138.92-2.063 2.063-2.063 1.14 0 2.064.925 2.064 2.063 0 1.139-.925 2.065-2.064 2.065zm1.782 13.019H3.555V9h3.564v11.452zM22.225 0H1.771C.792 0 0 .774 0 1.729v20.542C0 23.227.792 24 1.771 24h20.451C23.2 24 24 23.227 24 22.271V1.729C24 .774 23.2 0 22.222 0h.003z"/>
					</svg>
				</a>

				<!-- Twitter/X -->
				<a href="https://twitter.com/luisga88gm" target="_blank" rel="noopener noreferrer" class="social-icon group">
					<svg class="w-10 h-10 sm:w-12 sm:h-12 text-gray-400 group-hover:text-[#ff007f] transition-all duration-300" style="filter: drop-shadow(0 0 0 transparent); transition: filter 0.3s ease;" onmouseenter="this.style.filter='drop-shadow(0 0 10px rgba(255, 0, 127, 0.8))'" onmouseleave="this.style.filter='drop-shadow(0 0 0 transparent)'" fill="currentColor" viewBox="0 0 24 24">
						<path d="M18.244 2.25h3.308l-7.227 8.26 8.502 11.24H16.17l-5.214-6.817L4.99 21.75H1.68l7.73-8.835L1.254 2.25H8.08l4.713 6.231zm-1.161 17.52h1.833L7.084 4.126H5.117z"/>
					</svg>
				</a>

				<!-- Instagram -->
				<a href="https://instagram.com/luisga88gm" target="_blank" rel="noopener noreferrer" class="social-icon group">
					<svg class="w-10 h-10 sm:w-12 sm:h-12 text-gray-400 group-hover:text-[#00f2ff] transition-all duration-300" style="filter: drop-shadow(0 0 0 transparent); transition: filter 0.3s ease;" onmouseenter="this.style.filter='drop-shadow(0 0 10px rgba(0, 242, 255, 0.8))'" onmouseleave="this.style.filter='drop-shadow(0 0 0 transparent)'" fill="currentColor" viewBox="0 0 24 24">
						<path d="M12 0C8.74 0 8.333.015 7.053.072 5.775.132 4.905.333 4.14.63c-.789.306-1.459.717-2.126 1.384S.935 3.35.63 4.14C.333 4.905.131 5.775.072 7.053.012 8.333 0 8.74 0 12s.015 3.667.072 4.947c.06 1.277.261 2.148.558 2.913.306.788.717 1.459 1.384 2.126.667.666 1.336 1.079 2.126 1.384.766.296 1.636.499 2.913.558C8.333 23.988 8.74 24 12 24s3.667-.015 4.947-.072c1.277-.06 2.148-.262 2.913-.558.788-.306 1.459-.718 2.126-1.384.666-.667 1.079-1.335 1.384-2.126.296-.765.499-1.636.558-2.913.06-1.28.072-1.687.072-4.947s-.015-3.667-.072-4.947c-.06-1.277-.262-2.149-.558-2.913-.306-.789-.718-1.459-1.384-2.126C21.319 1.347 20.651.935 19.86.63c-.765-.297-1.636-.499-2.913-.558C15.667.012 15.26 0 12 0zm0 2.16c3.203 0 3.585.016 4.85.071 1.17.055 1.805.249 2.227.415.562.217.96.477 1.382.896.419.42.679.819.896 1.381.164.422.36 1.057.413 2.227.057 1.266.07 1.646.07 4.85s-.015 3.585-.074 4.85c-.061 1.17-.256 1.805-.421 2.227-.224.562-.479.96-.899 1.382-.419.419-.824.679-1.38.896-.42.164-1.065.36-2.235.413-1.274.057-1.649.07-4.859.07-3.211 0-3.586-.015-4.859-.074-1.171-.061-1.816-.256-2.236-.421-.569-.224-.96-.479-1.379-.899-.421-.419-.69-.824-.9-1.38-.165-.42-.359-1.065-.42-2.235-.045-1.26-.061-1.649-.061-4.844 0-3.196.016-3.586.061-4.861.061-1.17.255-1.814.42-2.234.21-.57.479-.96.9-1.381.419-.419.81-.689 1.379-.898.42-.166 1.051-.361 2.221-.421 1.275-.045 1.65-.06 4.859-.06l.045.03zm0 3.678c-3.405 0-6.162 2.76-6.162 6.162 0 3.405 2.76 6.162 6.162 6.162 3.405 0 6.162-2.76 6.162-6.162 0-3.405-2.76-6.162-6.162-6.162zM12 16c-2.21 0-4-1.79-4-4s1.79-4 4-4 4 1.79 4 4-1.79 4-4 4zm7.846-10.405c0 .795-.646 1.44-1.44 1.44-.795 0-1.44-.646-1.44-1.44 0-.794.646-1.439 1.44-1.439.793-.001 1.44.645 1.44 1.439z"/>
					</svg>
				</a>
			</div>
		</div>
	</section>
</MainLayout>

<script>
	// Translations object for contact page
	const translations = {
		en: {
			contact: {
				title: "LET'S CONNECT",
				subtitle: "Let's talk about your vision",
				form: {
					name: 'NAME',
					namePlaceholder: 'Insert your name',
					email: 'EMAIL',
					emailPlaceholder: 'Insert your email address',
					subject: 'SUBJECT',
					subjectPlaceholder: "Insert the subject of the contact",
					message: 'MESSAGE',
					messagePlaceholder: 'Tell me about your project...',
					submit: 'SEND MESSAGE',
					sending: '[ TRANSMITTING... ]',
					success: 'SYSTEM: DATA RECEIVED. CONNECTION ESTABLISHED.',
					error: 'ERROR: TRANSMISSION FAILED. RETRY PROTOCOL.'
				},
				social: {
					title: 'FIND ME ON'
				}
			}
		},
		es: {
			contact: {
				title: 'CONECTEMOS',
				subtitle: 'Charlemos sobre tu idea',
				form: {
					name: 'NOMBRE',
					namePlaceholder: 'Inserta tu nombre',
					email: 'EMAIL',
					emailPlaceholder: 'Inserta tu dirección de email',
					subject: 'ASUNTO',
					subjectPlaceholder: 'Inserta el asunto del contacto',
					message: 'MENSAJE',
					messagePlaceholder: 'Cuéntame sobre tu proyecto...',
					submit: 'ENVIAR MENSAJE',
					sending: '[ TRANSMITIENDO... ]',
					success: 'SISTEMA: DATOS RECIBIDOS. CONEXIÓN ESTABLECIDA.',
					error: 'ERROR: TRANSMISIÓN FALLIDA. REINTENTAR PROTOCOLO.'
				},
				social: {
					title: 'ENCUÉNTRAME EN'
				}
			}
		},
		it: {
			contact: {
				title: 'CONNETTIAMOCI',
				subtitle: 'Parliamo della tua visione',
				form: {
					name: 'NOME',
					namePlaceholder: 'Inserisci il tuo nome',
					email: 'EMAIL',
					emailPlaceholder: 'Inserisci la tua email',
					subject: 'OGGETTO',
					subjectPlaceholder: 'Inserisci l\'oggetto del contatto',
					message: 'MESSAGGIO',
					messagePlaceholder: 'Parlami del tuo progetto...',
					submit: 'INVIA MESSAGGIO',
					sending: '[ TRASMISSIONE... ]',
					success: 'SISTEMA: DATI RICEVUTI. CONNESSIONE STABILITA.',
					error: 'ERRORE: TRASMISSIONE FALLITA. PROTOCOLLO DI RIPETIZIONE.'
				},
				social: {
					title: 'TROVAMI SU'
				}
			}
		}
	};

	document.addEventListener('DOMContentLoaded', () => {
		// Language switcher functionality
		let currentLang: 'en' | 'es' | 'it' = 'en';

		function setLanguage(lang: 'en' | 'es' | 'it') {
			currentLang = lang;
			localStorage.setItem('language', lang);
			
			// Update all elements with data-i18n attribute
			const elements = document.querySelectorAll('[data-i18n]');
			elements.forEach(element => {
				const key = element.getAttribute('data-i18n');
				if (!key) return;
				
				const keys = key.split('.');
				let translation: any = (translations as any)[lang];
				
				// Navigate through nested object
				for (let i = 0; i < keys.length; i++) {
					if (translation && translation[keys[i]] !== undefined) {
						translation = translation[keys[i]];
					} else {
						translation = null;
						break;
					}
				}
				
				// Update innerHTML to support line breaks
				if (translation) {
					element.innerHTML = translation;
				}
			});

			// Update placeholders
			const placeholderElements = document.querySelectorAll('[data-i18n-placeholder]');
			placeholderElements.forEach(element => {
				const key = element.getAttribute('data-i18n-placeholder');
				if (!key) return;
				
				const keys = key.split('.');
				let translation: any = (translations as any)[lang];
				
				for (let i = 0; i < keys.length; i++) {
					translation = translation[keys[i]];
				}
				
				if (translation && element instanceof HTMLInputElement || element instanceof HTMLTextAreaElement) {
					element.placeholder = translation;
				}
			});
		}

		// Initialize language from localStorage or default to 'en'
		const savedLang = (localStorage.getItem('language') as 'en' | 'es' | 'it') || 'en';
		setLanguage(savedLang);

		// Form submission handler
		const form = document.getElementById('contact-form') as HTMLFormElement;
		const submitBtn = document.getElementById('submit-btn') as HTMLButtonElement;
		const statusDiv = document.getElementById('form-status') as HTMLDivElement;
		const statusText = document.getElementById('status-text') as HTMLSpanElement;
		const formContainer = document.getElementById('form-container') as HTMLDivElement;

		if (form && submitBtn && statusDiv && statusText && formContainer) {
			form.addEventListener('submit', async (e) => {
				e.preventDefault();

				// Get current translations
				const currentTranslations = (translations as any)[currentLang].contact.form;

				// Update subject dynamically with sender's name
				const nameInput = document.getElementById('name') as HTMLInputElement;
				const subjectInput = document.getElementById('email-subject') as HTMLInputElement;
				if (nameInput && subjectInput && nameInput.value.trim()) {
					subjectInput.value = `Message from: ${nameInput.value.trim()}`;
				}

				// Disable button and show sending state with hacker effect
				submitBtn.disabled = true;
				submitBtn.classList.add('animate-flicker');
				
				// Loading sequence with terminal effect
				submitBtn.textContent = '[ TRANSMITTING... ]';

				try {
					// Get form data
					const formData = new FormData(form);

					// Send to Formspree
					const response = await fetch(form.action, {
						method: 'POST',
						body: formData,
						headers: {
							'Accept': 'application/json'
						}
					});

					if (response.ok) {
						// Success - Show neon pulse effect
						formContainer.classList.add('animate-pulse-neon');
						submitBtn.classList.remove('animate-flicker');
						
						// Show success message
						submitBtn.textContent = currentTranslations.submit;
						submitBtn.disabled = false;
						statusText.textContent = 'SYSTEM: DATA RECEIVED. CONNECTION STABLE.';
						statusText.style.color = '#00f2ff';
						statusText.classList.add('animate-flicker');
						statusDiv.style.opacity = '1';

						// Reset form
						form.reset();

						// Remove pulse effect after 2 seconds
						setTimeout(() => {
							formContainer.classList.remove('animate-pulse-neon');
						}, 2000);

						// Hide message after 5 seconds
						setTimeout(() => {
							statusDiv.style.opacity = '0';
							statusText.classList.remove('animate-flicker');
						}, 5000);
					} else {
						// Error
						throw new Error('Form submission failed');
					}
				} catch (error) {
					// Show error message
					submitBtn.classList.remove('animate-flicker');
					submitBtn.textContent = currentTranslations.submit;
					submitBtn.disabled = false;
					statusText.textContent = currentTranslations.error;
					statusText.style.color = '#ff007f';
					statusDiv.style.opacity = '1';

					// Hide error after 5 seconds
					setTimeout(() => {
						statusDiv.style.opacity = '0';
					}, 5000);
				}
			});
		}
	});
</script>

<style>
	/* Smooth animations */
	@keyframes fadeIn {
		from { opacity: 0; transform: translateY(20px); }
		to { opacity: 1; transform: translateY(0); }
	}

	section {
		animation: fadeIn 0.8s ease-out;
	}

	/* Form focus animations */
	input:focus,
	textarea:focus {
		animation: glow 0.3s ease-in-out;
	}

	@keyframes glow {
		0% { box-shadow: 0 0 0 rgba(0, 242, 255, 0); }
		100% { box-shadow: 0 0 15px rgba(0, 242, 255, 0.4); }
	}

	/* Neon pulse effect for success */
	@keyframes pulseNeon {
		0%, 100% { 
			box-shadow: 0 0 40px rgba(0, 242, 255, 0.3);
			border-color: #00f2ff;
		}
		50% { 
			box-shadow: 0 0 50px rgba(0, 242, 255, 0.6), 0 0 100px rgba(0, 242, 255, 0.4);
			border-color: #00f2ff;
		}
	}

	.animate-pulse-neon {
		animation: pulseNeon 2s ease-in-out;
	}

	/* Flicker effect for success text */
	@keyframes flicker {
		0%, 100% { opacity: 1; }
		10%, 30%, 50%, 70%, 90% { opacity: 0.8; }
		20%, 40%, 60%, 80% { opacity: 1; }
	}

	.animate-flicker {
		animation: flicker 0.5s ease-in-out;
	}
</style>
